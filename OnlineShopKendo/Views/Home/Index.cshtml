@using OnlineShopKendo.Models
@model List<Item>

<script src="~/Scripts/Home.js"></script>
<link href="~/Content/Home.css" rel="stylesheet">

<div class="container-fluid">
    <div class="row">     
        <div class="col-lg-4">
            <div class="panel panel-default">
                <div class="panel-body">
                    <p>@Resources.Resource.YourShopingCart</p> @Resources.Resource.CurrentCost:
                    <div id="cost" value="0"></div>
                    @(Html.Kendo().Grid<OnlineShopKendo.Models.Item>() 
                          .Name("grid")
                          .Columns(columns =>
                          {
                              columns.Bound<int>(product => product.Id);
                              columns.Bound<string>(product => product.Descriptions.First().Text);
                              columns.Bound<int>(product => product.Cost);
                              columns.Template(@<text>
                                                </text>)
                                  .ClientTemplate("  <img src='/Item/GetImage/#: Id #' style='width: 100px; '>");
                              columns.Template(@<text>
                                                </text>)
                                  .ClientTemplate(" <input type='number' id='#: Id #' value='1' min='1' onchange='changeNumber(#: Id #,value)'/> ");
                              columns.Template(@<text>
                                                </text>)
                                  .ClientTemplate(" <button onclick='remove(#: Id #)'>X</button> ");
                          })
                          .DataSource(dataSource =>
                          {
                          })
                          .Sortable()
                          )
                    @{
                        if (User.Identity.IsAuthenticated)
                        {
                            <button onclick="sendOrder('@Resources.Resource.Ordered')">@Resources.Resource.ToOrder</button>
                        }
                        else
                        {
                            <p>@Resources.Resource.HelpAddAuthorize</p>
                        }
                        <button onclick="clearGrid()">@Resources.Resource.EmptyTrash</button>
                    }
                </div>
            </div>         
        </div>
        <div class="col-lg-8">    
            <div class="panel panel-default">
                <div class="panel-body">
                    @{
                        if (Model.Any())
                        {
                            <div class="container">
                                <div id="myCarousel" class="carousel slide" data-ride="carousel">
                                    <div class="carousel-inner">
                                        <h2>@Resources.Resource.HelpAdd</h2>
                                        <div class="item active" onclick="choose(@Model.OrderBy(i => i.Id).First().Id, '@Model.OrderBy(i => i.Id).First().Descriptions.First(i => i.Language.Code == Request.Cookies["lang"].Value).Text', @Model.OrderBy(i => i.Id).First().Cost)">
                                            <div class="carousel-caption">
                                                <div class="panel panel-default">
                                                    <div class="panel-body">
                                                        <h3 id="item+@Model.OrderBy(i => i.Id).First().Id">@Resources.Resource.Text: @Model.OrderBy(i => i.Id).First().Descriptions.First(i => i.Language.Code == Request.Cookies["lang"].Value).Text</h3>
                                                        <h4>@Resources.Resource.Cost: @Model.OrderBy(i => i.Id).First().Cost</h4>
                                                    </div>
                                                </div>
                                            </div>
                                            <img src="@Url.Action("GetImage", "Item", new {Model.OrderBy(i => i.Id).First().Id})" style="width: 800px;">
                                        </div>
                                        @{
                                            foreach (var item in Model.OrderBy(i => i.Id).Skip(1))
                                            {
                                                <div class="item" onclick="choose(@item.Id, '@item.Descriptions.First(i => i.Language.Code == Request.Cookies["lang"].Value).Text', @item.Cost)">
                                                    <div class="carousel-caption">
                                                        <div class="panel panel-default">
                                                            <div class="panel-body">
                                                                <h3 id="item+@item.Id">@Resources.Resource.Text: @item.Descriptions.First(i => i.Language.Code == Request.Cookies["lang"].Value).Text</h3>
                                                                <h4>@Resources.Resource.Cost: @item.Cost</h4>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <img src="@Url.Action("GetImage", "Item", new {item.Id})"style="max-width: 100%; height: auto;" >
                                                </div>
                                            }
                                        }
                                    </div>
                                    <a class="left carousel-control" href="#myCarousel" data-slide="prev">
                                        <span class="glyphicon glyphicon-chevron-left"></span>
                                        <span class="sr-only">Previous</span>
                                    </a>
                                    <a class="right carousel-control" href="#myCarousel" data-slide="next">
                                        <span class="glyphicon glyphicon-chevron-right"></span>
                                        <span class="sr-only">Next</span>
                                    </a>
                                </div>
                            </div>
                        }
                        else
                        {
                            <h2>@Resources.Resource.NoProduct</h2>
                        }
                    }
                </div>
            </div>      
        </div>
    </div>
</div>